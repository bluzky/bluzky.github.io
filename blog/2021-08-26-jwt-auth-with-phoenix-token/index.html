<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<title>JWT alternative token Authentication with Phoenix.Token</title>
<meta name=author content="Dung Nguyen">
<meta name=description content="  Drinking orange juice is good for your health. Reading some orange code is good too :D  ">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5">
<link rel=icon href=https://bluzky.github.io/images/favicon.png type=image/x-icon>
<link rel=preconnect href=https://fonts.gstatic.com>
<link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;600;700&display=swap">
<link rel=stylesheet href=https://bluzky.github.io/css/vendor.min.a175996d51c7122a7871164dca713adc582e8df8a6b31ae1e7169ca0559953614b9378e577a3ce6d3e6bc8fa87b3e4f38305c3f1478fb0b4904d66b4caffe85a.css integrity="sha512-oXWZbVHHEip4cRZNynE63Fgujfimsxrh5xacoFWZU2FLk3jld6PObT5ryPqHs+TzgwXD8UePsLSQTWa0yv/oWg==" media=screen>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-40665301-3','auto'),ga('send','pageview'))</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-40665301-3','auto'),ga('send','pageview'))</script>
</head>
<body>
<div style="min-height:calc(100vh - 65px)">
<div class=header-height-fix></div>
<header class=header-nav>
<div class=container>
<div class=row>
<div class=col-12>
<nav class="navbar navbar-expand-lg navbar-light p-0">
<a class="navbar-brand font-weight-bold mr-0" href=https://bluzky.github.io/>
<img loading=lazy src=https://bluzky.github.io/images/logo.png alt="The Organge+" height=35px>
</a>
<button class="search-toggle d-inline-block d-lg-none ml-auto mr-3" data-toggle=search aria-label="Search Toggle">
<i data-eva=search-outline></i>
</button>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navHeader aria-controls=navHeader aria-expanded=false aria-label="Toggle navigation">
<i data-eva=menu-outline></i>
<i class=d-none data-eva=close-outline></i>
</button>
<div class="collapse navbar-collapse" id=navHeader>
<ul class="navbar-nav mx-auto">
<li class=nav-item>
<a class=nav-link href=https://bluzky.github.io/>Blog</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://bluzky.github.io/tags/>Tags</a>
</li>
<li class=nav-item>
<a class=nav-link href=https://bluzky.github.io/about>About me</a>
</li>
</ul>
<div class="navbar-right d-none d-lg-inline-block">
<ul class="social-links list-unstyled list-inline">
<li class="list-inline-item ml-4 d-none d-lg-inline-block">
<button class=search-toggle data-toggle=search aria-label="Search Toggle">
<i data-eva=search-outline></i>
</button>
</li>
</ul>
</div>
</div>
</nav>
</div>
</div>
</div>
</header>
<div class=search-block>
<div data-toggle=search-close>
<i data-eva=close-outline class=text-primary></i>
</div>
<form action=/search>
<input id=search-query name=s type=search placeholder="Type words & hit enter" class=text-center aria-label=search-query>
</form>
</div>
<section class=section-sm>
<div class=container>
<div class="row justify-content-center">
<div class=col-lg-10>
<div class=pr-lg-4>
<div class=single-post>
<div class="text-center mb-5">
<h1 class="mb-4 post-title">JWT alternative token Authentication with Phoenix.Token</h1>
<ul class="card-meta list-inline">
<li class=list-inline-item>
<a href=#! class=card-meta-author>
<a href=https://bluzky.github.io/author/dung-nguyen/ class=card-meta-author>
<img loading=lazy src=https://bluzky.github.io/images/author/dung-nguyen.jpg alt="Dung Nguyen">
<span>Dung Nguyen</span>
</a>
</a>
</li>
<li class=list-inline-item>|</li>
<li class=list-inline-item>
<span>26 August 2021</span>
</li>
</ul>
</div>
<div class="mb-5 text-center">
<img loading=lazy class="img-fluid rounded" src=https://bluzky.github.io/img/jwt-phoenix.png alt="Image not Found">
</div>
<div class=content><p>In this post, you&rsquo;ll learn how to implement JWT-based authentication using <code>Phoenix.Token</code>.</p>
<p>In our previous projects, we use <code>guardian</code> library to implement JWT authentication. <code>Guardian</code> is a great library which provides lots of method and tool to work with authentication. But sometime we don&rsquo;t need them all. And recently, I found <code>Phoenix.Token</code> module shipped with <code>phoenix</code> framework that helps me to implement JWT alternative token authentication with few lines of code.</p>
<p>Let&rsquo;s do it.</p>
<h2 id=1-implement-token-module>1. Implement Token module</h2>
<p>Here is the document of <a href=https://hexdocs.pm/phoenix/Phoenix.Token.html>Phoenix.Token</a>.</p>
<p>We just wrap <code>sign</code> and <code>verify</code> function from <code>Phoenix.Token</code> to create and check for valid token.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elixir data-lang=elixir><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>defmodule</span> <span style=color:#50fa7b>MyApp.Token</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>  <span style=color:#50fa7b>@signing_salt</span> <span style=color:#f1fa8c>&#34;octosell_api&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>  <span style=color:#6272a4># token for 2 week</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>  <span style=color:#50fa7b>@token_age_secs</span> <span style=color:#bd93f9>14</span> <span style=color:#ff79c6>*</span> <span style=color:#bd93f9>86_400</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>  <span style=color:#50fa7b>@doc</span> <span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span style=color:#f1fa8c>  Create token for given data
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#f1fa8c>  &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>  <span style=color:#50fa7b>@spec</span> sign(map()) <span style=color:#ff79c6>::</span> binary()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>  <span style=color:#8be9fd;font-style:italic>def</span> sign(data) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#50fa7b>Phoenix.Token</span><span style=color:#ff79c6>.</span>sign(<span style=color:#50fa7b>MyAppWeb.Endpoint</span>, <span style=color:#50fa7b>@signing_salt</span>, data)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>  <span style=color:#50fa7b>@doc</span> <span style=color:#f1fa8c>&#34;&#34;&#34;
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span style=color:#f1fa8c>  Verify given token by:
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span style=color:#f1fa8c>  - Verify token signature
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span style=color:#f1fa8c>  - Verify expiration time
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span style=color:#f1fa8c>  &#34;&#34;&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>  <span style=color:#50fa7b>@spec</span> verify(<span style=color:#50fa7b>String</span><span style=color:#ff79c6>.</span>t()) <span style=color:#ff79c6>::</span> {<span style=color:#f1fa8c>:ok</span>, any()} <span style=color:#ff79c6>|</span> {<span style=color:#f1fa8c>:error</span>, <span style=color:#f1fa8c>:unauthenticated</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>  <span style=color:#8be9fd;font-style:italic>def</span> verify(token) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>    <span style=color:#ff79c6>case</span> <span style=color:#50fa7b>Phoenix.Token</span><span style=color:#ff79c6>.</span>verify(<span style=color:#50fa7b>MyAppWeb.Endpoint</span>, <span style=color:#50fa7b>@signing_salt</span>, token,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>             <span style=color:#f1fa8c>max_age</span>: <span style=color:#50fa7b>@token_age_secs</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>           ) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>      {<span style=color:#f1fa8c>:ok</span>, data} <span style=color:#ff79c6>-&gt;</span> {<span style=color:#f1fa8c>:ok</span>, data}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span>      _error <span style=color:#ff79c6>-&gt;</span> {<span style=color:#f1fa8c>:error</span>, <span style=color:#f1fa8c>:unauthenticated</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>    <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span style=color:#ff79c6>end</span>
</code></pre></div><p>Here we wrap in <code>Token</code> module to simplify API. We pass <code>MyAppWeb.Endpoint</code> here to use secret key that config for endpoint. You can pass secret key from config as firt argument.</p>
<h2 id=2-generate-token>2. Generate token</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elixir data-lang=elixir><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>defmodule</span> <span style=color:#50fa7b>MyAppWeb.SessionController</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>  ...
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>  <span style=color:#8be9fd;font-style:italic>def</span> new(conn, %{<span style=color:#f1fa8c>&#34;email&#34;</span> <span style=color:#ff79c6>=&gt;</span> email, <span style=color:#f1fa8c>&#34;password&#34;</span> <span style=color:#ff79c6>=&gt;</span> password}) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    with {<span style=color:#f1fa8c>:ok</span>, user} <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>Account</span><span style=color:#ff79c6>.</span>authenticate_user(email, password),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>         {<span style=color:#f1fa8c>:ok</span>, token} <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>MyApp.Token</span><span style=color:#ff79c6>.</span>sign(%{<span style=color:#f1fa8c>user_id</span>: user<span style=color:#ff79c6>.</span>id}) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>      ...
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>      <span style=color:#6272a4># return token to client</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>    <span style=color:#ff79c6>else</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>      _ <span style=color:#ff79c6>-&gt;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        {<span style=color:#f1fa8c>:error</span>, gettext(<span style=color:#f1fa8c>&#34;email or password is in correct&#34;</span>)}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>
</code></pre></div><p>Here we create Phoenix token with a map <code>%{user_id: user.id}</code> and return to client.</p>
<h2 id=3-build-plug-to-verify-token>3. Build Plug to verify token</h2>
<p>Client sent token to server via header <code>Authorization</code>. We extract token and call <code>Token.verify</code> to check if token is valid and not expired.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elixir data-lang=elixir><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>defmodule</span> <span style=color:#50fa7b>MyApp.Plug.Authenticate</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>  <span style=color:#ff79c6>import</span> <span style=color:#50fa7b>Plug.Conn</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>  <span style=color:#ff79c6>require</span> <span style=color:#50fa7b>Logger</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>  <span style=color:#8be9fd;font-style:italic>def</span> init(opts) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>    opts
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>  <span style=color:#8be9fd;font-style:italic>def</span> call(conn, _opts) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    with [<span style=color:#f1fa8c>&#34;Bearer &#34;</span> <span style=color:#ff79c6>&lt;&gt;</span> token] <span style=color:#ff79c6>&lt;-</span> get_req_header(conn, <span style=color:#f1fa8c>&#34;authorization&#34;</span>),
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>         {<span style=color:#f1fa8c>:ok</span>, data} <span style=color:#ff79c6>&lt;-</span> <span style=color:#50fa7b>MyApp.Token</span><span style=color:#ff79c6>.</span>verify(token) <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>      conn
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>      <span style=color:#ff79c6>|&gt;</span> assign(<span style=color:#f1fa8c>:current_user</span>, <span style=color:#50fa7b>MyApp.Account</span><span style=color:#ff79c6>.</span>get_user(data<span style=color:#ff79c6>.</span>user_id))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#ff79c6>else</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>      error <span style=color:#ff79c6>-&gt;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        conn
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        <span style=color:#ff79c6>|&gt;</span> put_status(<span style=color:#f1fa8c>:unauthorized</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>        <span style=color:#ff79c6>|&gt;</span> <span style=color:#50fa7b>Phoenix.Controller</span><span style=color:#ff79c6>.</span>put_view(<span style=color:#50fa7b>MyAppWeb.ErrorView</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>        <span style=color:#ff79c6>|&gt;</span> <span style=color:#50fa7b>Phoenix.Controller</span><span style=color:#ff79c6>.</span>render(<span style=color:#f1fa8c>:&#34;401&#34;</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>        <span style=color:#ff79c6>|&gt;</span> halt()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>    <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span style=color:#ff79c6>end</span>
</code></pre></div><h2 id=4-add-plug-to-router>4. Add plug to router</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-elixir data-lang=elixir><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#8be9fd;font-style:italic>defmodule</span> <span style=color:#50fa7b>MyAppWeb.Router</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>  <span style=color:#ff79c6>use</span> <span style=color:#50fa7b>MyAppWeb</span>, <span style=color:#f1fa8c>:router</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>  pipeline <span style=color:#f1fa8c>:api</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    plug <span style=color:#f1fa8c>:accepts</span>, [<span style=color:#f1fa8c>&#34;json&#34;</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>  pipeline <span style=color:#f1fa8c>:authenticated</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>    plug <span style=color:#50fa7b>MyAppWeb.Plug.Authenticate</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>  scope <span style=color:#f1fa8c>&#34;/api&#34;</span>, <span style=color:#50fa7b>MyAppWeb</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    pipe_through <span style=color:#f1fa8c>:api</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    post <span style=color:#f1fa8c>&#34;/auth/login&#34;</span>, <span style=color:#50fa7b>SessionController</span>, <span style=color:#f1fa8c>:new</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>  scope <span style=color:#f1fa8c>&#34;/api&#34;</span>, <span style=color:#50fa7b>MyAppWeb</span> <span style=color:#ff79c6>do</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>    pipe_through [<span style=color:#f1fa8c>:api</span>, <span style=color:#f1fa8c>:authenticated</span>]
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>    delete <span style=color:#f1fa8c>&#34;/auth/logout&#34;</span>, <span style=color:#50fa7b>SessionController</span>, <span style=color:#f1fa8c>:delete</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>    ...
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>  <span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span style=color:#ff79c6>end</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>
</code></pre></div><p>We have done with it. Just a few line of code</p>
<h2 id=conclusion>Conclusion</h2>
<p>Implement token authentication with <code>Phoenix</code> is so easy and you may not need Guardian for your application.
In this post I only implement simple version of token authentication. In real application, you should store token signature in database or redis and</p>
<ul>
<li>In <code>Authenticate</code> plug check if the token exists in database.</li>
<li>When user logout, clear it from database/redis to make sure that token cannot be used to make request anymore.</li>
</ul>
<p>Thanks for reading.</p>
</div>
</div>
<div class=single-post-meta>
<div class="row justify-content-center">
<div class="col-md-6 text-center text-md-left">
<ul class="post-meta-tags list-unstyled list-inline">
<li class=list-inline-item>
<a href=https://bluzky.github.io/tags/elixir>#elixir</a>
</li>
<li class=list-inline-item>
<a href=https://bluzky.github.io/tags/phoenix>#phoenix</a>
</li>
<li class=list-inline-item>
<a href=https://bluzky.github.io/tags/authentication>#authentication</a>
</li>
</ul>
</div>
<div class="col-md-6 text-center text-md-right mt-4 mt-md-0">
<ul class="social-links has-bg-color list-unstyled list-inline" style=line-height:0>
<li class=list-inline-item>
<a class="resp-sharing-button__link d-block" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fbluzky.github.io%2fblog%2f2021-08-26-jwt-auth-with-phoenix-token%2f" target=_blank rel=noopener aria-label>
<div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small">
<div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid">
<i data-eva=facebook-outline class=text-dark></i>
</div>
</div>
</a>
</li>
<li class=list-inline-item>
<a class="resp-sharing-button__link d-block" href="https://twitter.com/intent/tweet/?text=JWT%20alternative%20token%20Authentication%20with%20Phoenix.Token&url=https%3a%2f%2fbluzky.github.io%2fblog%2f2021-08-26-jwt-auth-with-phoenix-token%2f" target=_blank rel=noopener aria-label>
<div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
<div aria-hidden=true class="resp-sharing-button__icon resp-sharing-button__icon--solid">
<i data-eva=twitter-outline class=text-dark></i>
</div>
</div>
</a>
</li>
</ul>
</div>
</div>
</div>
<div class=single-post-author>
<div class="row justify-content-center">
<div class=col-md-12>
<div class="media d-block d-sm-flex text-center text-sm-left">
<a href=https://bluzky.github.io/author/dung-nguyen/><img loading=lazy class="img-fluid rounded-circle mr-0 mr-sm-4 mb-4" src=https://bluzky.github.io/images/author/dung-nguyen.jpg alt="Dung Nguyen"></a>
<div class=media-body>
<h4>
<a href=https://bluzky.github.io/author/dung-nguyen/ class="text-dark font-weight-700">Dung Nguyen</a>
</h4>
<p class=font-primary>Hi! I&rsquo;m Dung Nguyen. I&rsquo;m an Elixir developer at OnPoint Vietnam.</p>
<ul class="social-links list-unstyled list-inline ml-0 ml-sm-n2">
<li class=list-inline-item>
<a href=https://www.linkedin.com/in/dung-nguyen-tien-695ba135/>
<i class="lab linkedin-outline"></i>
</a>
</li>
<li class=list-inline-item>
<a href=https://www.github.com/bluzky>
<i class="lab github-outline"></i>
</a>
</li>
<li class=list-inline-item>
<a href=https://dev.to/bluzky>
<i class="lab book-outline"></i>
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class=single-post-similer>
<div class="row justify-content-center">
<div class=col-md-12>
<div class="row mt-3">
<div class=col-12>
<h3 class="text-dark font-weight-800 mb-4 pb-2">
You May Also Like
</h3>
</div>
<div class=col-md-6><article class="card post-card">
<a href=https://bluzky.github.io/blog/2021-08-14-validate-request-params-with-phoenix/>
<img loading=lazy class="w-100 rounded" src=https://bluzky.github.io/img/validate-request-params.png alt="How to validate request params in Phoenix">
</a>
<div class=card-body>
<ul class="card-meta list-inline mb-2">
<li class="list-inline-item mb-2">
<a href=https://bluzky.github.io/author/dung-nguyen/ class=card-meta-author>
<img loading=lazy src=https://bluzky.github.io/images/author/dung-nguyen.jpg alt="Dung Nguyen">
<span>Dung Nguyen</span>
</a>
</li>
<li class="list-inline-item mb-2">
<span>14 Aug, 2021</span>
</li>
</ul>
<h3 class=mb-3>
<a class=post-title href=https://bluzky.github.io/blog/2021-08-14-validate-request-params-with-phoenix/>How to validate request params in Phoenix</a>
</h3>
<p> Credit: filter image taken from svgrepo.com
In web developments, server receives lots of request data from client side. And when working with …</p>
<ul class="card-meta list-inline">
<li class="list-inline-item mb-2">
<ul class="card-meta-tag list-inline">
<li class="list-inline-item tag">
<a href=https://bluzky.github.io/tags/elixir>elixir</a>
</li>
<li class="list-inline-item tag">
<a href=https://bluzky.github.io/tags/phoenix>phoenix</a>
</li>
<li class="list-inline-item tag">
<a href=https://bluzky.github.io/tags/param-validation>param validation</a>
</li>
</ul>
</li>
</ul>
</div>
</article>
</div>
<div class=col-md-6><article class="card post-card">
<a href=https://bluzky.github.io/blog/2021-07-23-build-a-json-view-yourself/>
<img loading=lazy class="w-100 rounded" src=https://bluzky.github.io/img/build-a-json-view.png alt="Build your own library to render json response in Phoenix">
</a>
<div class=card-body>
<ul class="card-meta list-inline mb-2">
<li class="list-inline-item mb-2">
<a href=https://bluzky.github.io/author/dung-nguyen/ class=card-meta-author>
<img loading=lazy src=https://bluzky.github.io/images/author/dung-nguyen.jpg alt="Dung Nguyen">
<span>Dung Nguyen</span>
</a>
</li>
<li class="list-inline-item mb-2">
<span>23 Jul, 2021</span>
</li>
</ul>
<h3 class=mb-3>
<a class=post-title href=https://bluzky.github.io/blog/2021-07-23-build-a-json-view-yourself/>Build your own library to render json response in Phoenix</a>
</h3>
<p>In my previous article, I introduced my library call JsonView to render json response easier. You can read it here: Render Ecto schema to json with …</p>
<ul class="card-meta list-inline">
<li class="list-inline-item mb-2">
<ul class="card-meta-tag list-inline">
<li class="list-inline-item tag">
<a href=https://bluzky.github.io/tags/elixir>elixir</a>
</li>
<li class="list-inline-item tag">
<a href=https://bluzky.github.io/tags/phoenix>phoenix</a>
</li>
<li class="list-inline-item tag">
<a href=https://bluzky.github.io/tags/json-view>json view</a>
</li>
</ul>
</li>
</ul>
</div>
</article>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</div>
<footer class="section-sm p-0">
<div class=container>
<div class="row justify-content-center align-items-center">
<div class=col-lg-5>
</div>
<div class="col-lg-12 text-center mb-3">
<ul class="social-links icon-box list-unstyled list-inline font-weight-500 mb-3">
</ul>
<p class="mb-0 font-weight-500 copyright-text content">
Blog by Dung Nguyen.Theme by <a href=https://gethugothemes.com/>Gethugothemes</a>
</p>
</div>
</div>
</div>
</footer>
<script src=https://unpkg.com/eva-icons></script>
<script data-turbolinks-suppress-warning src=/js/vendor.min.e8b43a49809453b05c67c402f4ef9f014ea047b1e351a77943c2f08c978e06e6dd1eb7279560628d119926cab96a55a422c55b47fa351500c8c2fe5e59a26234.js integrity="sha512-6LQ6SYCUU7BcZ8QC9O+fAU6gR7HjUad5Q8LwjJeOBubdHrcnlWBijRGZJsq5alWkIsVbR/o1FQDIwv5eWaJiNA=="></script>
</body>
</html>